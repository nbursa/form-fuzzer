<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>form-fuzzer demo</title>
  </head>
  <body>
    <form id="test-form">
      <input name="email" type="email" />
      <input name="age" type="number" />
      <input name="username" placeholder="user123" />
      <select name="role">
        <option value="admin">Admin</option>
        <option value="user">User</option>
      </select>
      <textarea name="bio"></textarea>
    </form>

    <button id="generate-btn">Generate</button>

    <script>
      document
        .getElementById("generate-btn")
        .addEventListener("click", async () => {
          const form = document.getElementById("test-form");
          const html = form.outerHTML;

          const resp = await fetch("/api/fuzz", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ html }),
          });

          if (!resp.ok) {
            alert("Error: " + resp.statusText);
            return;
          }

          const data = await resp.json();
          console.log("data:", data);
          alert(JSON.stringify(data, null, 2));
        });
    </script>
  </body>
</html>
